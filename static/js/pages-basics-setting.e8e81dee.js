(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-basics-setting"],{"46a2":function(t,s,a){"use strict";a.d(s,"b",(function(){return e})),a.d(s,"c",(function(){return n})),a.d(s,"a",(function(){}));var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("v-uni-view",[a("cu-custom",{attrs:{bgColor:"bg-gradual-pink",isBack:!0}},[a("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),a("template",{attrs:{slot:"content"},slot:"content"},[t._v("订餐设置")])],2),t._l(t.formlist.answers,(function(s,e){return a("v-uni-view",{key:e,staticClass:"margin-top"},[a("v-uni-view",{staticClass:"cu-bar bg-white solid-bottom"},[a("v-uni-view",{staticClass:"action"},[a("v-uni-text",{staticClass:"cuIcon-titles text-orange"}),t._v("<"+t._s(s.answers["Lokasi Pengantaran 送餐地点"])+">\n\t\t\t\t\t"+t._s(s.answers["Pesan Makan 华飞点餐入口"]))],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-switch",{class:s.isactivate?"checked":"",attrs:{checked:!!s.isactivate},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.IsCard(e,s._id,s.isactivate)}}})],1)],1),a("v-uni-view",{staticClass:"cu-card case",class:s.isactivate?"no-card":""},[a("v-uni-view",{staticClass:"cu-item shadow"},[a("v-uni-view",{staticClass:"cu-list menu-avatar"},[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"cu-avatar round lg",style:[{backgroundImage:"url(https://mp-2349e2b3-2bda-47db-937e-a03686d78af1.cdn.bspapp.com/static/food/"+e+".jpg)"}]}),a("v-uni-view",{staticClass:"content flex-sub"},[a("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(s.answers["Nama dan Nomor ID 订餐者姓名+工号"]))]),a("v-uni-view",{staticClass:"text-gray text-sm flex justify-between"},[t._v("用餐日期："+t._s(s.answers["Tanggal pesan makan 用餐日期"].substr(0,10)))])],1)],1)],1)],1)],1),t.currentList.includes(s._id)?t._e():a("v-uni-view",{staticClass:"cu-bar tabbar margin-bottom-xl bg-white"},[a("v-uni-view",{staticClass:"action text-gray add-action"},[a("v-uni-button",{staticClass:"cu-btn cuIcon-unfold bg-green shadow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addItem(s._id)}}}),t._v("展开")],1)],1),t.currentList.includes(s._id)?a("v-uni-form",[t._l(s.answers,(function(n,i,r){return a("v-uni-view",{key:r,staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(r+1)+"."+t._s(t.chineseOnlyString(i))+":")]),"RADIO_V2"==t.formlist.form[i].type?a("v-uni-picker",{attrs:{range:Object.keys(t.formlist.form[i].value)},on:{change:function(s){arguments[0]=s=t.$handleEvent(s),function(s){return t.PickerChange(s,Object.keys(t.formlist.form[i].value),e,i)}.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker"},[t._v(t._s(n))])],1):t._e(),"DATE"==t.formlist.form[i].type?a("v-uni-picker",{attrs:{disabled:0!=t.userdata.permissions,mode:"date",value:t.formlist.answers[e]["answers"][i],start:"2023-11-01",end:"2030-01-01"},on:{change:function(s){arguments[0]=s=t.$handleEvent(s),function(s){return t.DateChange(s,e,i)}.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.formlist.answers[e]["answers"][i]))])],1):t._e(),"NUMBER_FLOAT"==t.formlist.form[i].type?a("v-uni-input",{attrs:{type:"number"},model:{value:t.formlist.answers[e]["answers"][i],callback:function(s){t.$set(t.formlist.answers[e]["answers"],i,s)},expression:"formlist.answers[answersindex]['answers'][answerkey]"}}):t._e(),"WORD"==t.formlist.form[i].type?a("v-uni-input",{model:{value:t.formlist.answers[e]["answers"][i],callback:function(s){t.$set(t.formlist.answers[e]["answers"],i,s)},expression:"formlist.answers[answersindex]['answers'][answerkey]"}}):t._e(),"TABLE"==t.formlist.form[i].type?a("v-uni-view",[a("v-uni-text",[t._v(t._s(t.GroupNumberSum(t.formlist.answers[e]["answers"][i],s.answers["Pesan Makan 华飞点餐入口"])))]),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",attrs:{"data-target":e+r+i+"0"},on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.showModal.apply(void 0,arguments)}}},[t._v("查看")]),a("v-uni-view",{staticClass:"cu-modal",class:t.modalName==e+r+i+"0"?"show":"",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"cu-dialog",on:{click:function(s){s.stopPropagation(),arguments[0]=s=t.$handleEvent(s)}}},[a("v-uni-view",{staticClass:"cu-list menu text-left solid-top"},t._l(t.formlist.answers[e]["answers"][i],(function(e,n){return a("v-uni-view",{key:n,staticClass:"cu-item"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.GroupNumberTitle(e,s.answers["Pesan Makan 华飞点餐入口"])))])],1)],1)})),1)],1)],1)],1):t._e()],1)})),a("v-uni-view",{staticClass:"cu-bar btn-group bg-white"},[a("v-uni-button",{staticClass:"cu-btn bg-green shadow-blur round lg",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.PutSave(s._id,e)}}},[t._v("保存")])],1)],2):t._e(),t.currentList.includes(s._id)?a("v-uni-view",{staticClass:"cu-bar  tabbar margin-bottom-xl bg-white"},[a("v-uni-view",{staticClass:"action text-gray action"},[a("v-uni-button",{staticClass:"cu-btn cuIcon-fold bg-green shadow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.removeItem(s._id)}}}),t._v("收回")],1)],1):t._e()],1)})),t.loadModal?a("v-uni-view",{staticClass:"cu-load load-modal"},[a("v-uni-image",{attrs:{src:"https://mp-2349e2b3-2bda-47db-937e-a03686d78af1.cdn.bspapp.com/static/loading.png",mode:"aspectFit"}}),a("v-uni-view",{staticClass:"gray-text"},[t._v("加载中...")])],1):t._e()],2)},n=[]},"554d":function(t,s,a){"use strict";a.r(s);var e=a("7403"),n=a.n(e);for(var i in e)["default"].indexOf(i)<0&&function(t){a.d(s,t,(function(){return e[t]}))}(i);s["default"]=n.a},7403:function(t,s,a){"use strict";(function(t,e){a("7a82"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a("13d5"),a("d3b7"),a("4de4"),a("7db0"),a("99af"),a("caad"),a("2532"),a("14d9"),a("ac1f"),a("466d");var n={onShow:function(){this.LoadModal(!0);try{this.userdata=uni.getStorageSync("userdata"),this.formlist.form=uni.getStorageSync("form")}catch(s){t("log",s," at pages/basics/setting.vue:141")}this.getUserLists(),this.getFormList()},data:function(){return{currentList:[],userdata:{},formlist:{answers:{},form:{}},groupListCN:[],groupListID:[],loadModal:!1,modalName:null}},methods:{PickerChange:function(t,s,a,e){this.formlist.answers[a]["answers"][e]=s[t.detail.value]},GroupNumberTitle:function(t,s){var a=this.groupListCN;"masakan Indonesia印尼餐"==s&&(a=this.groupListID);var e=a.filter((function(s){return s.groupNumber===t})).reduce((function(t,s){return t+s.users.filter((function(t){return t.state})).length}),0),n=a.find((function(s){return s.groupNumber===t})),i=n?"".concat(n.group,"(").concat(e,"人)"):null;return i},GroupNumberSum:function(t,s){var a=this.groupListCN;"masakan Indonesia印尼餐"==s&&(a=this.groupListID);var e=a.filter((function(s){return t.includes(s.groupNumber)})).reduce((function(t,s){return t+s.users.filter((function(t){return t.state})).length}),0);return"总计:".concat(e,"人 ")},DateChange:function(t,s,a){this.formlist.answers[s]["answers"][a]=t.detail.value+" 00:00"},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},addItem:function(t){this.currentList.includes(t)||this.currentList.push(t)},removeItem:function(t){this.currentList=this.currentList.filter((function(s){return s!==t}))},IsCard:function(t,s,a){this.formlist.answers[t].isactivate=!a,this.removeItem(s),this.PutIsActivate(s,t)},LoadModal:function(t){this.loadModal=t},chineseOnlyString:function(t){var s=t.match(/[\u4e00-\u9fa5]+/g);return s?s.join(""):""},getFormList:function(){var t=this;e.callFunction({name:"databaseApi",data:{method:"getFormList",database:"form-answers",parameter:{permissions:this.userdata.permissions}}}).then((function(s){t.formlist.answers=s.result.data,t.LoadModal(!1)}))},PutSave:function(s,a){var n=this;this.LoadModal(!0),e.callFunction({name:"databaseApi",data:{method:"putAnswers",database:"form-answers",parameter:{_id:s,answers:this.formlist.answers[a].answers}}}).then((function(s){t("log",s," at pages/basics/setting.vue:268"),n.getFormList()}))},PutIsActivate:function(s,a){var n=this;this.LoadModal(!0),e.callFunction({name:"databaseApi",data:{method:"putIsActivate",database:"form-answers",parameter:{_id:s,isactivate:this.formlist.answers[a].isactivate}}}).then((function(s){t("log",s," at pages/basics/setting.vue:286"),n.getFormList()}))},getUserLists:function(){var t=this;e.callFunction({name:"databaseApi",data:{method:"getUserList",database:"user-data-CN",parameter:{permissions:this.userdata.permissions,type:"switch"}}}).then((function(s){t.groupListCN=s.result.data})),e.callFunction({name:"databaseApi",data:{method:"getUserList",database:"user-data-ID",parameter:{permissions:this.userdata.permissions,type:"switch"}}}).then((function(s){t.groupListID=s.result.data}))}}};s.default=n}).call(this,a("0de9")["log"],a("a9ff")["default"])},c8b1:function(t,s,a){"use strict";a.r(s);var e=a("46a2"),n=a("554d");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(s,t,(function(){return n[t]}))}(i);var r=a("f0c5"),o=Object(r["a"])(n["default"],e["b"],e["c"],!1,null,"0f857270",null,!1,e["a"],void 0);s["default"]=o.exports}}]);