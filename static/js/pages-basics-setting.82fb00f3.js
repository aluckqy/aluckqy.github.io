(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-basics-setting"],{"554d":function(t,a,s){"use strict";s.r(a);var e=s("7403"),n=s.n(e);for(var i in e)["default"].indexOf(i)<0&&function(t){s.d(a,t,(function(){return e[t]}))}(i);a["default"]=n.a},7403:function(t,a,s){"use strict";(function(t,e){s("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s("13d5"),s("d3b7"),s("4de4"),s("7db0"),s("99af"),s("caad"),s("2532"),s("14d9"),s("ac1f"),s("466d");var n={onShow:function(){this.LoadModal(!0);try{this.userdata=uni.getStorageSync("userdata"),this.formlist.form=uni.getStorageSync("form")}catch(a){t("log",a," at pages/basics/setting.vue:141")}this.getUserLists(),this.getFormList()},data:function(){return{currentList:[],userdata:{},formlist:{answers:{},form:{}},groupListCN:[],groupListID:[],loadModal:!1,modalName:null}},methods:{PickerChange:function(t,a,s,e){this.formlist.answers[s]["answers"][e]=a[t.detail.value]},GroupNumberTitle:function(t,a){var s=this.groupListCN;"masakan Indonesia印尼餐"==a&&(s=this.groupListID);var e=s.filter((function(a){return a.groupNumber===t})).reduce((function(t,a){return t+a.users.filter((function(t){return t.state})).length}),0),n=s.find((function(a){return a.groupNumber===t})),i=n?"".concat(n.group,"(").concat(e,"人)"):null;return i},GroupNumberSum:function(t,a){var s=this.groupListCN;"masakan Indonesia印尼餐"==a&&(s=this.groupListID);var e=s.filter((function(a){return t.includes(a.groupNumber)})).reduce((function(t,a){return t+a.users.filter((function(t){return t.state})).length}),0);return"总计:".concat(e,"人 ")},DateChange:function(t,a,s){this.formlist.answers[a]["answers"][s]=t.detail.value+" 00:00"},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},addItem:function(t){this.currentList.includes(t)||this.currentList.push(t)},removeItem:function(t){this.currentList=this.currentList.filter((function(a){return a!==t}))},IsCard:function(t,a,s){this.formlist.answers[t].isactivate=!s,this.removeItem(a),this.PutIsActivate(a,t)},LoadModal:function(t){this.loadModal=t},chineseOnlyString:function(t){var a=t.match(/[\u4e00-\u9fa5]+/g);return a?a.join(""):""},getFormList:function(){var t=this;e.callFunction({name:"databaseApi",data:{method:"getFormList",database:"form-answers",parameter:{permissions:this.userdata.permissions}}}).then((function(a){t.formlist.answers=a.result.data,t.LoadModal(!1)}))},PutSave:function(a,s){var n=this;this.LoadModal(!0),e.callFunction({name:"databaseApi",data:{method:"putAnswers",database:"form-answers",parameter:{_id:a,answers:this.formlist.answers[s].answers}}}).then((function(a){t("log",a," at pages/basics/setting.vue:268"),n.getFormList()}))},PutIsActivate:function(a,s){var n=this;this.LoadModal(!0),e.callFunction({name:"databaseApi",data:{method:"putIsActivate",database:"form-answers",parameter:{_id:a,isactivate:this.formlist.answers[s].isactivate}}}).then((function(a){t("log",a," at pages/basics/setting.vue:286"),n.getFormList()}))},getUserLists:function(){var t=this;e.callFunction({name:"databaseApi",data:{method:"getUserList",database:"user-data-CN",parameter:{permissions:0,type:"switch"}}}).then((function(a){t.groupListCN=a.result.data})),e.callFunction({name:"databaseApi",data:{method:"getUserList",database:"user-data-ID",parameter:{permissions:0,type:"switch"}}}).then((function(a){t.groupListID=a.result.data}))}}};a.default=n}).call(this,s("0de9")["log"],s("a9ff")["default"])},c8b1:function(t,a,s){"use strict";s.r(a);var e=s("d738"),n=s("554d");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(a,t,(function(){return n[t]}))}(i);var r=s("f0c5"),o=Object(r["a"])(n["default"],e["b"],e["c"],!1,null,"d3453360",null,!1,e["a"],void 0);a["default"]=o.exports},d738:function(t,a,s){"use strict";s.d(a,"b",(function(){return e})),s.d(a,"c",(function(){return n})),s.d(a,"a",(function(){}));var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("v-uni-view",[s("cu-custom",{attrs:{bgColor:"bg-gradual-pink",isBack:!0}},[s("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),s("template",{attrs:{slot:"content"},slot:"content"},[t._v("订餐设置")])],2),t._l(t.formlist.answers,(function(a,e){return s("v-uni-view",{key:e,staticClass:"margin-top"},[s("v-uni-view",{staticClass:"cu-bar bg-white solid-bottom"},[s("v-uni-view",{staticClass:"action"},[s("v-uni-text",{staticClass:"cuIcon-titles text-orange"}),t._v("<"+t._s(a.answers["Lokasi Pengantaran 送餐地点"])+">\n\t\t\t\t\t"+t._s(a.answers["Pesan Makan 华飞点餐入口"]))],1),s("v-uni-view",{staticClass:"action"},[s("v-uni-switch",{class:a.isactivate?"checked":"",attrs:{checked:!!a.isactivate},on:{change:function(s){arguments[0]=s=t.$handleEvent(s),t.IsCard(e,a._id,a.isactivate)}}})],1)],1),s("v-uni-view",{staticClass:"cu-card case",class:a.isactivate?"no-card":""},[s("v-uni-view",{staticClass:"cu-item shadow"},[s("v-uni-view",{staticClass:"cu-list menu-avatar"},[s("v-uni-view",{staticClass:"cu-item"},[s("v-uni-view",{staticClass:"cu-avatar round lg",style:[{backgroundImage:"url(https://mp-2349e2b3-2bda-47db-937e-a03686d78af1.cdn.bspapp.com/static/food/"+e+".jpg)"}]}),s("v-uni-view",{staticClass:"content flex-sub"},[s("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(a.answers["Nama dan Nomor ID 订餐者姓名+工号"]))]),s("v-uni-view",{staticClass:"text-gray text-sm flex justify-between"},[t._v("用餐日期："+t._s(a.answers["Tanggal pesan makan 用餐日期"].substr(0,10)))])],1)],1)],1)],1)],1),t.currentList.includes(a._id)?t._e():s("v-uni-view",{staticClass:"cu-bar tabbar margin-bottom-xl bg-white"},[s("v-uni-view",{staticClass:"action text-gray add-action"},[s("v-uni-button",{staticClass:"cu-btn cuIcon-unfold bg-green shadow",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.addItem(a._id)}}}),t._v("展开")],1)],1),t.currentList.includes(a._id)?s("v-uni-form",[t._l(a.answers,(function(n,i,r){return s("v-uni-view",{key:r,staticClass:"cu-form-group"},[s("v-uni-view",{staticClass:"title"},[t._v(t._s(r+1)+"."+t._s(t.chineseOnlyString(i))+":")]),"RADIO_V2"==t.formlist.form[i].type?s("v-uni-picker",{attrs:{range:Object.keys(t.formlist.form[i].value)},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){return t.PickerChange(a,Object.keys(t.formlist.form[i].value),e,i)}.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"picker"},[t._v(t._s(n))])],1):t._e(),"DATE"==t.formlist.form[i].type?s("v-uni-picker",{attrs:{disabled:0!=t.userdata.permissions,mode:"date",value:t.formlist.answers[e]["answers"][i],start:"2023-11-01",end:"2030-01-01"},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){return t.DateChange(a,e,i)}.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.formlist.answers[e]["answers"][i]))])],1):t._e(),"NUMBER_FLOAT"==t.formlist.form[i].type?s("v-uni-input",{attrs:{type:"number"},model:{value:t.formlist.answers[e]["answers"][i],callback:function(a){t.$set(t.formlist.answers[e]["answers"],i,a)},expression:"formlist.answers[answersindex]['answers'][answerkey]"}}):t._e(),"WORD"==t.formlist.form[i].type?s("v-uni-input",{model:{value:t.formlist.answers[e]["answers"][i],callback:function(a){t.$set(t.formlist.answers[e]["answers"],i,a)},expression:"formlist.answers[answersindex]['answers'][answerkey]"}}):t._e(),"TABLE"==t.formlist.form[i].type?s("v-uni-view",[s("v-uni-text",[t._v(t._s(t.GroupNumberSum(t.formlist.answers[e]["answers"][i],a.answers["Pesan Makan 华飞点餐入口"])))]),s("v-uni-button",{staticClass:"cu-btn bg-green shadow",attrs:{"data-target":e+r+i+"0"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showModal.apply(void 0,arguments)}}},[t._v("查看")]),s("v-uni-view",{staticClass:"cu-modal",class:t.modalName==e+r+i+"0"?"show":"",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.hideModal.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"cu-dialog",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a)}}},[s("v-uni-view",{staticClass:"cu-list menu text-left solid-top"},t._l(t.formlist.answers[e]["answers"][i],(function(e,n){return s("v-uni-view",{key:n,staticClass:"cu-item"},[s("v-uni-view",{staticClass:"content"},[s("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.GroupNumberTitle(e,a.answers["Pesan Makan 华飞点餐入口"])))])],1)],1)})),1)],1)],1)],1):t._e()],1)})),s("v-uni-view",{staticClass:"cu-bar btn-group bg-white"},[s("v-uni-button",{staticClass:"cu-btn bg-green shadow-blur round lg",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.PutSave(a._id,e)}}},[t._v("保存")])],1)],2):t._e(),t.currentList.includes(a._id)?s("v-uni-view",{staticClass:"cu-bar  tabbar margin-bottom-xl bg-white"},[s("v-uni-view",{staticClass:"action text-gray action"},[s("v-uni-button",{staticClass:"cu-btn cuIcon-fold bg-green shadow",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.removeItem(a._id)}}}),t._v("收回")],1)],1):t._e()],1)})),t.loadModal?s("v-uni-view",{staticClass:"cu-load load-modal"},[s("v-uni-image",{attrs:{src:"https://mp-2349e2b3-2bda-47db-937e-a03686d78af1.cdn.bspapp.com/static/loading.png",mode:"aspectFit"}}),s("v-uni-view",{staticClass:"gray-text"},[t._v("加载中...")])],1):t._e()],2)},n=[]}}]);